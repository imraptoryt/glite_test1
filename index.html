<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PROJECT: SAVINGXMAS ‚Äî Prototype</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;color:#e6eef8;background:#071020;overflow-x:hidden;position:relative}

/* Canvas neige */
#snowCanvas, #rainCanvas{position:fixed;inset:0;width:100%;height:100%;z-index:-1;pointer-events:none}

/* PRE-LOGIN */
#prelogin{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#02111a,#0a1c32);z-index:2000;}
#prelogin button{padding:18px 28px;font-size:20px;border-radius:10px;border:2px solid #00e1ff;background:#00121a;color:#b8f7ff;cursor:pointer;transition:.25s;box-shadow:0 0 12px #00e1ff;}
#prelogin button:hover{transform:scale(1.08);background:#002633;box-shadow:0 0 20px #00e1ff;}

/* PRELOADER */
.preloader{position:fixed;inset:0;display:none;align-items:center;justify-content:center;flex-direction:column;background:linear-gradient(180deg,#02111a 0%,#071020 60%);z-index:1000}
.console{width:min(920px,92vw);max-width:920px;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.1);backdrop-filter:blur(4px);padding:28px;border-radius:14px;box-shadow:0 0 25px #00f0ff99}
.title{font-weight:700;letter-spacing:1px;margin-bottom:10px;font-size:20px;color:#9df8ff;text-shadow:0 0 10px #00eaff}
.status{font-family:monospace;background:#00121a;padding:12px;border-radius:8px;color:#7bffb1;min-height:88px;overflow:hidden}
.progress{height:10px;background:rgba(255,255,255,0.06);border-radius:999px;margin-top:14px;overflow:hidden;box-shadow:0 0 10px #00eaff66}
.bar{height:100%;width:0%;background:linear-gradient(90deg,#1bd3ff,#9ef3ff,#fff)}
.hint{font-size:13px;color:#9fb0c8}

/* APP */
.app{display:none;padding:36px;min-height:100vh}
.container{max-width:1100px;margin:0 auto}
header{display:flex;justify-content:space-between;align-items:center;margin-bottom:28px}
.logo{font-weight:900;color:#00eaff;text-shadow:0 0 8px #00eaff,0 0 20px #00eaff;letter-spacing:2px;font-size:26px;}
.subtitle{color:#8faac1;text-shadow:0 0 4px #1ad2ff66}

/* CARDS */
.menu{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:18px}
.card{background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,255,255,0.02));padding:22px;border-radius:14px;border:1px solid rgba(255,255,255,0.08);cursor:pointer;transition:transform .18s ease,box-shadow .18s ease;text-align:center;box-shadow:0 0 20px #00eaff22;}
.card:hover{transform:translateY(-6px) scale(1.03);box-shadow:0 0 30px #00eaff66}
.card h3{margin-bottom:8px;color:#d6f1ff;text-shadow:0 0 6px #00eaff}
.card p{color:#8faac1;font-size:14px}

/* Zone d√©tails cristaux */
#crystalInfo{display:none;margin-top:20px;padding:20px;background:linear-gradient(180deg,#071826,#02111a);border-radius:12px;border:1px solid rgba(255,255,255,0.05);color:#cce6ff;display:flex;align-items:flex-start;gap:20px;}
#crystalInfo img{width:120px;border-radius:8px;flex-shrink:0;}
#crystalInfo pre{margin:0;font-size:14px;white-space:pre-wrap;flex:1;}
.coordonnees{margin-top:12px;padding:10px;background:rgba(0,0,0,0.2);border-radius:8px;font-family:monospace;color:#ffdddd;font-size:13px;}

/* Footer */
footer{margin-top:36px;color:#678aa0;font-size:13px}
</style>
</head>
<body>

<canvas id="snowCanvas"></canvas>
<canvas id="rainCanvas"></canvas>

<!-- PRELOGIN -->
<div id="prelogin">
  <button id="enterBtn">ACC√âDER AU SERVEUR</button>
</div>

<!-- PRELOADER -->
<div class="preloader" id="preloader">
  <div class="console">
    <div class="title">[Connexion s√©curis√©e ‚Äî Serveur : ARCHIVE-7]</div>
    <div class="status"><div id="log">En attente‚Ä¶</div></div>
    <div class="progress"><div class="bar" id="bar"></div></div>
    <div class="hint">Authentification en cours...</div>
  </div>
</div>

<!-- APP -->
<main class="app" id="app">
  <div class="container">
    <header>
      <div>
        <div class="logo">PROJECT: SAVINGXMAS</div>
        <div class="subtitle">Interface d'acc√®s ‚Äî Choisissez une option</div>
      </div>
      <div style="text-align:right;color:#92c7ff">Statut : <strong id="connectedTag">En ligne</strong></div>
    </header>

    <section id="home">
      <div class="menu">
        <!-- Cristaux avec attributs pour texte + image + coordonn√©es -->
        <button class="card" data-name="Cristal Vert" 
          data-desc="Le Cristal Vert est n√© au c≈ìur de la For√™t Bor√©ale, l√† o√π les sapins mill√©naires murmurent encore la magie ancienne. Lorsque No√´l fut menac√© par le Gel Sans Fin ‚Äî un sortil√®ge qui voulait arr√™ter le temps pour emp√™cher la f√™te ‚Äî le cristal lib√©ra une √©nergie verte qui fit refleurir les arbres et r√©chauffa la Terre. Gr√¢ce √† lui, les lutins retrouv√®rent leur atelier enseveli sous la neige √©ternelle. La couleur verte repr√©sente l‚Äôespoir, la renaissance et la force de la nature qui prot√®ge No√´l." 
          data-coord="Coordonn√©es : 47.3769¬∞ N, 7.5496¬∞ E" 
          data-img="https://i.goopics.net/bxi0nc.png">
          <img src="https://i.goopics.net/bxi0nc.png" style="width:60px;margin:auto;">
          <h3>Cristal Vert</h3><p>Le cristal √©meraude protecteur de No√´l.</p>
        </button>

        <button class="card" data-name="Cristal Bleu" 
          data-desc="Au sommet du Mont Nordique, l√† o√π le vent chante entre les pics glac√©s, naquit le Cristal Bleu. Lorsque No√´l fut envahi par les Ombres Sans Lune, un brouillard obscur qui avalait la lumi√®re, le cristal lib√©ra une lueur bleue brillante comme mille √©toiles. Cette lumi√®re repoussa les t√©n√®bres et ouvrit un chemin c√©leste permettant au tra√Æneau du P√®re No√´l de voyager de nouveau. Sa couleur bleue symbolise la clart√©, la protection nocturne et la magie des froides nuits d‚Äôhiver." 
          data-coord="Coordonn√©es : 60.1699¬∞ N, 24.9384¬∞ E" 
          data-img="https://i.goopics.net/v1ft8o.png">
          <img src="https://i.goopics.net/v1ft8o.png" style="width:60px;margin:auto;">
          <h3>Cristal Bleu</h3><p>Prot√®ge la nuit de No√´l contre les ombres.</p>
        </button>

        <button class="card" data-name="Cristal Rouge" 
          data-desc="Le Cristal Rouge est l'√©nergie ardente du c≈ìur de No√´l, r√©chauffant les √¢mes et illuminant les f√™tes. Il permet de concentrer la joie et la chaleur de No√´l pour les partager avec tous. Sa couleur rouge symbolise la passion, le courage et l‚Äô√©nergie qui anime la f√™te." 
          data-coord="Coordonn√©es : 48.8566¬∞ N, 2.3522¬∞ E" 
          data-img="https://i.goopics.net/1txwxe.png">
          <img src="https://i.goopics.net/1txwxe.png" style="width:60px;margin:auto;">
          <h3>Cristal Rouge</h3><p>√ânergie ardente du c≈ìur de No√´l.</p>
        </button>

        <button class="card" data-name="Cristal Purpre" 
          data-desc="Amplifie et harmonise les voix pour que tout chant de No√´l sonne beau et magique. Le Cristal Purpre veille √† ce que chaque m√©lodie r√©sonne parfaitement et que l‚Äôharmonie se diffuse dans tout le village. Il est la cl√© des chants enchant√©s de No√´l." 
          data-coord="Coordonn√©es : 59.3293¬∞ N, 18.0686¬∞ E" 
          data-img="https://i.goopics.net/og8iri.png">
          <img src="https://i.goopics.net/og8iri.png" style="width:60px;margin:auto;">
          <h3>Cristal Purpre</h3><p>Harmonise les chants des f√™tes.</p>
        </button>

        <button class="card" data-name="Cristal Blanc" 
          data-desc="Donn√©es corrompues‚Ä¶ syst√®me instable‚Ä¶" 
          data-coord="Coordonn√©es inconnues : ???" 
          data-img="https://i.goopics.net/moo2vc.png">
          <img src="https://i.goopics.net/moo2vc.png" style="width:60px;margin:auto;">
          <h3>Cristal Blanc</h3><p>Erreur syst√®me magique‚Ä¶</p>
        </button>
      </div>

      <!-- Zone d√©tails -->
      <div id="crystalInfo"></div>
    </section>

    <footer>Prototype ‚Äî design sp√©cial No√´l üéÑ</footer>
  </div>
</main>

<script>
/* PRELOGIN */
document.getElementById('enterBtn').onclick = () => {
  document.getElementById('prelogin').style.display="none";
  document.getElementById('preloader').style.display="flex";
  startLoading();
};

/* PRELOADER */
const preloader = document.getElementById('preloader');
const bar = document.getElementById('bar');
const log = document.getElementById('log');
const app = document.getElementById('app');
const connectedTag = document.getElementById('connectedTag');
const steps = [
  'Initialisation du protocole...',
  'Authentification du client...',
  'V√©rification des cl√©s...',
  'N√©gociation s√©curis√©e (AES-256)...',
  'T√©l√©chargement des meta-donn√©es...',
  'Etablissement du tunnel s√©curis√©...'
];
let idx=0, progress=0;
function startLoading(){setTimeout(advance,700);}
function advance(){
  if(idx<steps.length){log.innerText=steps[idx];idx++;}
  progress+=Math.floor(Math.random()*12)+8;if(progress>100)progress=100;
  bar.style.width=progress+'%';
  if(progress>=100){log.innerText='Connexion √©tablie. Redirection...';
    setTimeout(()=>{preloader.style.opacity='0';setTimeout(()=>{preloader.remove();app.style.display='block';connectedTag.innerText='Connect√©';},600);},400);
  } else setTimeout(advance,600+Math.random()*700);
}

/* CARD ‚Üí INFO (Terminal typing effect + coordonn√©es) */
const info = document.getElementById('crystalInfo');
document.querySelectorAll('.card').forEach(card => {
  card.addEventListener('click', () => {
    const name = card.dataset.name;
    const desc = card.dataset.desc;
    const img = card.dataset.img;
    const coord = card.dataset.coord;

    info.style.display = "flex";
    info.innerHTML = `<img src="${img}"><pre id="loadingText"></pre><div class="coordonnees">${coord}</div>`;
    const loadingText = document.getElementById('loadingText');

    if (name === "Cristal Blanc") {
      const lines = [
        '[LOADING‚Ä¶ 12%]',
        '‚Äî ACC√àS ARCHiVE_Œî7 : √âCHEC',
        '‚Äî Paquet manquant : CRI5TAL_WH1TE_CORE',
        'Fr@gm#nt_detect√© : "Le CÃ∑rÃ∂iÃ∏sÃµtÃµaÃ¥lÃ¥ Ã∑BÃ¥lÃ¥aÃ¥nÃ∂cÃ¥ ‚Ä¶"',
        '>>> FICHIER ENDOMMAG√â (0xA7-NULL)',
        '!!! ATT3NTI0N ‚Äî A L N E F F A C E R !!!',
        'pouvoir‚Ä¶ instab‚ñàe‚Ä¶ lumi√®re ou‚Äî STOP',
        '>>> rewriting memory sector‚Ä¶ impossible',
        '[ERR‚ßñR 404 : DESCRIPTION DU CRISTAL INTROUVABLE]',
        '[FRAGMENT FINAL] : "Ne‚Ä¶ p4s‚Ä¶ l‚Äô‚Ä¶ act1v3r‚Ä¶"'
      ];
      let i = 0;
      loadingText.innerText = '';
      const interval = setInterval(() => {
        if (i < lines.length) {
          loadingText.innerText += lines[i] + '\n';
          i++;
        } else clearInterval(interval);
      }, 500);
      return;
    }

    // Texte normal lettre par lettre
    let text = desc + '\n';
    let idx = 0;
    loadingText.innerText = '';
    function typeLetter() {
      if (idx < text.length) {
        loadingText.innerText += text[idx];
        idx++;
        setTimeout(typeLetter, 20);
      }
    }
    typeLetter();
  });
});

/* SNOW CANVAS */
const canvas=document.getElementById('snowCanvas');
const ctx=canvas.getContext('2d');let W,H,flakes=[];
function resize(){W=canvas.width=window.innerWidth;H=canvas.height=window.innerHeight;}
resize();window.onresize=resize;
function createFlake(){return {x:Math.random()*W,y:-10,r:Math.random()*3+1,v:Math.random()*1+0.5};}
function loopSnow(){ctx.clearRect(0,0,W,H);if(flakes.length<200)flakes.push(createFlake());for(let f of flakes){f.y+=f.v;ctx.beginPath();ctx.arc(f.x,f.y,f.r,0,6.28);ctx.fillStyle='white';ctx.fill();} flakes=flakes.filter(f=>f.y<H+10);requestAnimationFrame(loopSnow);}
loopSnow();

/* RAIN CANVAS (image-based) */
const rainCanvas=document.getElementById('rainCanvas');
const rctx=rainCanvas.getContext('2d');
let RW,RH,raindrops=[];
function resizeRain(){RW=rainCanvas.width=window.innerWidth;RH=rainCanvas.height=window.innerHeight;}
resizeRain();window.onresize=resizeRain;

const rainImg = new Image();
rainImg.src = "https://i.imgur.com/yourRainImage.png"; // <-- remplace par ton image

function createDrop(){return {x:Math.random()*RW,y:-20,w:rainImg.width,h:rainImg.height,v:Math.random()*4+2};}

function loopRain(){
  rctx.clearRect(0,0,RW,RH);
  if(raindrops.length<50) raindrops.push(createDrop());
  for(let d of raindrops){
    d.y+=d.v;
    rctx.drawImage(rainImg,d.x,d.y,d.w,d.h);
  }
  raindrops=raindrops.filter(d=>d.y<RH+20);
  requestAnimationFrame(loopRain);
}
rainImg.onload=()=>{loopRain();}
</script>

</body>
</html>
